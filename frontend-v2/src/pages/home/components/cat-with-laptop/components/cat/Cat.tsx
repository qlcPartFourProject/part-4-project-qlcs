import { useState, useEffect } from 'react'
import { animated, useSpring } from 'react-spring'

const rightArm = [
    "M478.944 181.104C486.045 179.329 491.372 174.002 492.26 158.022C502.808 166.621 509.374 175.201 510.903 199.748C495.811 212.176 490.484 211.289 450.535 205.962C449.647 207.737 446.096 211.289 438.106 208.625C424.789 213.064 421.788 203.299 428.341 194.421C433.602 187.293 439.587 186.213 447.871 188.207L478.944 181.104Z",
    "M478.111 196.17C486.1 186.406 491.426 172.203 489.65 158C500.197 166.597 511.201 188.492 512.73 213.036C498.527 224.576 467.459 240.554 457.694 246.767C459.47 254.756 446.155 257.419 438.165 254.756C424.85 259.195 423.962 249.43 428.401 241.441C429.881 238.778 435.502 234.34 441.716 233.452L478.111 196.17Z",
];

const rightEye = [
    "M519 60.4993C522.154 39.9991 495.782 40.4997 493 55.9997C489.5 75.499 516 79.9989 519 60.4993ZM494.5 56.4993C498.928 41.2459 518.5 42.9992 517.5 60.4993C515 77.9993 490 71.9993 494.5 56.4993Z",
    "M519 60.4993C522.154 39.9991 495.782 40.4997 493 55.9997C489.5 75.499 516 79.9989 519 60.4993ZM494.5 56.4993C494.399 64.278 511 73 517.5 60.4993C513 70.5 497 68.5 494.5 56.4993Z"
];

const leftEye = [
    "M554.5 60.4987C557.654 39.9984 531.282 40.4991 528.5 55.9991C525 75.4984 551.5 79.9982 554.5 60.4987ZM530 56.4987C534.428 41.2453 554 42.9986 553 60.4987C550.5 77.9987 525.5 71.9987 530 56.4987Z",
    "M554.5 60.4987C557.654 39.9984 531.282 40.4991 528.5 55.9991C525 75.4984 551.5 79.9982 554.5 60.4987ZM530 56.4987C528.5 66.5 548 72 553 60.4987C548 72 529.5 67.5 530 56.4987Z"
];

const tail = [
"M708.198 230.834C705.533 244.226 697.915 257.26 687.779 268.12C739 268 735.5 265.5 749.5 259.5C763.5 253.5 776.564 251.775 791 256C815 263.024 829.5 224.938 791 216.5C754.5 208.5 733.311 232.839 708.198 230.834Z",
// "M708.198 230.834C705.533 244.226 697.915 257.26 687.779 268.12H730.392C763.239 268.12 796.87 240.599 800.526 209.527C802.301 194.435 781.018 183.782 770.341 202.425C751.53 235.272 733.311 232.839 708.198 230.834Z",
"M708.198 230.834C705.533 244.226 697.915 257.26 687.779 268.12C739 268 736.5 268.571 752.5 264C768.5 259.429 788.273 241.454 795 228C812.5 193 782.5 180.5 769 204C752.31 233.052 733.311 232.839 708.198 230.834Z",

"M708.198 230.834C705.533 244.226 697.916 257.26 687.779 268.12C701 268.12 719.055 265.591 729 259.502C753.5 244.5 753.837 213.585 762 208.5C792.5 189.5 770 163.5 744.5 181.5C722.503 197.028 729 234 708.198 230.834Z"

];

export const Cat = () => {
    return (
        <>
        <RightArm/>
        <Tail/>
        <g className='body'>
            <path fillRule="evenodd" clipRule="evenodd" d="M514.664 15.106C495.133 -5.31274 489.814 1.78941 492.47 27.5347C492.528 28.0923 492.584 28.6081 492.637 29.0863C493.048 32.8357 493.207 34.2813 491.582 35.5246C470.397 51.7396 463.729 133.13 522.5 234L522 217.5C522 188 523.5 209.5 525.5 234C526.61 247.597 528.5 252 534.132 253.101C535.395 252.607 538 252 541 252.5C544.7 249.725 547.117 244.81 548.25 242.506C548.342 242.319 548.425 242.15 548.5 242C551.103 236.794 553.732 228.159 554.719 224.918L554.721 224.911L554.737 224.857C554.847 224.497 554.935 224.207 555 224C555.566 222.189 556.726 218.019 558.099 213.081C562.79 196.212 569.974 170.378 564.5 199C560.822 218.228 557.114 229.797 551.979 245.816L551.978 245.818L551.974 245.831C550.948 249.034 549.864 252.415 548.712 256.071C551.385 258.691 553.448 262.661 554.288 268.12H572.369C568.87 266.37 568.267 262.001 569.799 258C570.367 256.519 571.227 255.088 572.34 253.86C574.672 251.29 583.237 249.328 587.481 249.919C578.272 233.127 573.578 216.379 575.301 201C576.645 189 581.5 181 584.5 177C587.327 173.231 593.5 168 604 164.5C609.278 162.741 631.999 154.283 609 166C600.653 170.252 573.382 176.865 581 220C582.587 228.985 586.167 239.5 588.5 246.5C589.351 249.054 589.805 250.742 589.237 253.028C588 258 574.959 258.514 573 255C571 261 571 264.5 576 268.12H627H640.5C690.123 263.683 701.957 246.075 707.025 199.5C705.599 193.656 703.58 187.81 701.096 182.006C692.391 161.67 675.969 141.984 652.268 128.741C651.313 128.207 650.372 127.683 649.446 127.167C629.786 116.223 616.773 108.979 608.768 85.2399C597.41 51.5591 587.473 33.5934 561.716 3.56517C555.179 -4.05582 549.526 1.16122 548.399 13.3306C548 17.6432 546.624 18.6572 543.961 18.6572L523.542 17.7695C519.426 18.2459 517.588 18.1626 514.664 15.106ZM509.338 19.5448L498.684 26.6469C497.797 24.8714 496.909 21.3203 496.909 18.657C496.909 14.9478 497.386 8.48058 504.011 15.106C505.228 16.323 506.416 17.2469 507.635 18.1945C508.194 18.6294 508.76 19.0693 509.338 19.5448ZM567.93 23.0958C561.91 21.0029 558.438 20.1447 551.951 19.5448L552.838 13.3304C553.726 8.89155 556.389 3.56494 562.604 14.2182L567.93 23.0958Z" fill="#FBC00D"/>
            <path d="M584.5 177C581.5 181 576.645 189 575.301 201C573.578 216.379 578.272 233.127 587.481 249.919C588.049 250.955 588.635 251.992 589.237 253.028C589.805 250.742 589.351 249.054 588.5 246.5C586.167 239.5 582.587 228.985 581 220C573.382 176.865 600.653 170.252 609 166C631.999 154.283 609.278 162.741 604 164.5C593.5 168 587.327 173.231 584.5 177Z" fill="#C7990E"/>
            <path d="M548.712 256.071C549.864 252.415 550.948 249.034 551.974 245.831C551.976 245.826 551.977 245.822 551.978 245.818L551.979 245.816C557.114 229.797 560.822 218.228 564.5 199C569.974 170.378 562.79 196.212 558.099 213.081C556.726 218.019 555.566 222.189 555 224C554.935 224.207 554.847 224.497 554.737 224.857C554.732 224.875 554.726 224.893 554.721 224.911C554.72 224.913 554.719 224.916 554.719 224.918C553.732 228.159 551.103 236.794 548.5 242C548.425 242.15 548.342 242.319 548.25 242.506C547.117 244.81 544.7 249.725 541 252.5C544.15 253.101 546.978 254.37 548.712 256.071Z" fill="#C7990E"/>
            <path d="M524.43 268.12H543.961H554.288C553.448 262.661 551.385 258.691 548.712 256.071C546.978 254.37 544.15 253.101 541 252.5C538 252 535.395 252.607 534.132 253.101C533.452 253.367 532.794 253.698 532.156 254.076C529.567 255.614 527.36 258.026 525.971 261.213C525.097 263.217 524.548 265.528 524.43 268.12Z" fill="#FFD248"/>
            <path d="M572.34 253.86C572.35 254.113 572.873 254.772 573 255C574.959 258.514 588 258 589.237 253.028C588.635 251.992 588.049 250.955 587.481 249.919C583.237 249.328 574.672 251.29 572.34 253.86Z" fill="#FFD248"/>
            <path d="M687.779 268.12C697.915 257.26 705.533 244.226 708.198 230.834C710.239 220.576 709.597 210.042 707.025 199.5C701.957 246.075 690.123 263.683 640.5 268.12H687.779Z" fill="#C7990E"/>
            <path d="M522.5 234C523.327 244.615 524.347 250.58 525.971 261.213C527.36 258.026 529.567 255.614 532.156 254.076C532.794 253.698 533.452 253.367 534.132 253.101C528.5 252 526.61 247.597 525.5 234C523.5 209.5 522 188 522 217.5L522.5 234Z" fill="#C7990E"/>
            <path d="M569.799 258C568.267 262.001 568.87 266.37 572.369 268.12H576C571 264.5 571 261 573 255C572.873 254.772 572.35 254.113 572.34 253.86C571.227 255.088 570.367 256.519 569.799 258Z" fill="#C7990E"/>
        </g>
        <g className='inner-ears'>
            <path d="M551.951 19.5448C558.438 20.1447 561.91 21.0029 567.93 23.0958L562.604 14.2182C556.389 3.56494 553.726 8.89155 552.838 13.3304L551.951 19.5448Z" fill="#FFA100"/>
            <path d="M498.684 26.6469L509.338 19.5448C508.76 19.0693 508.194 18.6294 507.635 18.1945C506.416 17.2469 505.228 16.323 504.011 15.106C497.386 8.48058 496.909 14.9478 496.909 18.657C496.909 21.3203 497.797 24.8714 498.684 26.6469Z" fill="#FFA100"/>
        </g>
        <g className='whiskers'>
            <path d="M505.301 79.7231L505.787 79.9133C483.593 74.5867 480.042 73.6989 459.623 66.5968C480.759 70.1195 485.296 71.8949 505.301 79.7231Z" fill="black"/>
            <path d="M504.011 82.5766C485.478 80.7367 474.055 80.7115 455.184 82.5766C473.768 83.8249 485.129 84.0704 504.011 82.5766Z" fill="black"/>
            <path d="M504.899 86.1278C484.48 87.9035 468.501 93.2302 460.511 98.5562C470.276 96.7813 484.48 90.5669 504.899 86.1278Z" fill="black"/>
            <path d="M591.013 66.5967C574.145 67.4844 554.614 73.699 541.298 79.0259C552.839 77.2498 571.482 73.6987 591.013 66.5967Z" fill="black"/>
            <path d="M597.227 83.4646C582.135 79.9136 553.726 80.8013 542.185 82.5768C561.716 84.3524 580.359 84.3524 597.227 83.4646Z" fill="black"/>
            <path d="M591.013 98.5566C579.472 92.3422 561.716 87.9034 542.186 87.0155C561.716 92.3422 572.369 95.0055 591.013 98.5566Z" fill="black"/>
        </g>
        <Eyes />
        <g className='mouth'>
            <path fillRule="evenodd" clipRule="evenodd" d="M520.879 76.3623C516.44 76.3623 515.552 78.1378 517.328 80.8011C517.825 81.5474 519.072 82.6699 520.039 83.1864C520.171 83.2568 520.298 83.3159 520.416 83.3613C520.59 83.4275 520.747 83.4644 520.879 83.4644C521.003 83.4644 521.161 83.4413 521.342 83.3975C521.472 83.366 521.615 83.3239 521.767 83.2719C522.909 82.8803 524.564 81.9317 525.318 80.8011C527.093 78.1378 526.205 76.3623 520.879 76.3623Z" fill="#FF8282"/>
            <path d="M516.44 89.6788C518.264 88.3481 519.281 87.6251 520.879 87.0155C522.257 87.1446 523.923 88.5573 525.318 89.6788C524.474 88.5053 523.036 86.9732 521.342 86.0098V83.3975C521.161 83.4413 521.003 83.4644 520.879 83.4644C520.747 83.4644 520.59 83.4275 520.416 83.3613L520.574 86.0098C518.608 86.9949 517.921 88.2871 516.44 89.6788Z" fill="black"/>
        </g>
        <g className='glasses'>
            <path fillRule="evenodd" clipRule="evenodd" d="M535.813 50.2263C531.533 51.7622 527.642 54.834 529.198 62.1296C530.837 69.8093 533.001 74.0905 537 78.5C539.335 81.0744 551.377 84.2908 559.16 78.2568C564.607 74.033 566.728 63.0566 566.163 56.3699C565.774 51.7622 561.6 50.3847 558.381 49.4583C549.043 46.7704 542.428 47.8526 535.813 50.2263Z" fill="#D3D3D3" fillOpacity="0.3"/>
            <path fillRule="evenodd" clipRule="evenodd" d="M472 48.0373C472 53.413 472.389 55.7169 474.335 57.6368C475.502 58.7888 476.389 61.0743 476.669 63.0125C477.447 68.3883 479.782 74.5319 481.339 77.6038C484.062 82.9795 497.681 86.8193 508.187 81.0596C511.547 79.2175 516.69 69.4524 517.914 64.5485C519.86 56.7539 525.5 57 527.5 65.5C528.656 70.4135 532.7 81.0596 540.872 83.7475C545.93 85.2834 553.353 86.2472 559.549 81.4436C564.996 77.2198 566.553 71.4601 568.109 64.1645C569.01 59.9407 570.055 56.4849 575.113 54.949L592.346 49.6005C593.513 49.2164 597 48.5 597 47.5C597 46.5 596.03 45.2853 595.5 44.5006C594.722 43.3487 592.167 45.1163 591 45.5003L572.389 52.2609C572.389 51.8769 572.389 51.109 572 50.341C570.833 49.573 569.865 49.2266 568.498 48.8051C556.047 44.9653 549.043 44.9655 535.813 48.0373C525.307 50.7252 517.136 49.9572 509.354 47.2694C504.087 45.4503 489.675 43.6313 482.117 46.1174C479.513 46.9739 477.447 47.5384 472 48.0373ZM479.782 54.0661C480.025 53.3459 480.35 52.7188 480.751 52.1693C482.273 50.0822 484.895 49.1152 488.342 48.4211C495.601 46.9594 504.859 47.6663 508.965 49.573C515.58 52.6449 516.831 54.26 516.358 60.3245C515.969 65.3162 511.3 78.3716 502.739 80.6754C495.183 82.7091 486.008 81.7126 482.506 73.6491C479.02 65.6227 478.943 58.1878 479.548 55C479.618 54.6294 479.698 54.3161 479.782 54.0661ZM529.198 62.1296C527.642 54.834 531.533 51.7622 535.813 50.2263C542.428 47.8526 549.043 46.7704 558.381 49.4583C561.6 50.3847 565.774 51.7622 566.163 56.3699C566.728 63.0566 564.607 74.033 559.16 78.2568C551.377 84.2908 539.335 81.0744 537 78.5C533.001 74.0905 530.837 69.8093 529.198 62.1296Z" fill="black"/>
            <path d="M488.342 48.4211C495.601 46.9594 504.859 47.6663 508.965 49.573C515.58 52.6449 516.831 54.26 516.358 60.3245C515.969 65.3162 511.3 78.3716 502.739 80.6754C495.183 82.7091 486.008 81.7126 482.506 73.6491C479.02 65.6227 478.943 58.1878 479.548 55C479.618 54.6294 479.698 54.3161 479.782 54.0661C480.025 53.3459 480.35 52.7188 480.751 52.1693C482.273 50.0822 484.895 49.1152 488.342 48.4211Z" fill="#D3D3D3" fillOpacity="0.3"/>
        </g>
        </>
    );
}

const RightArm = () => {
    const [rightArmIndex, setRightArmIndex] = useState<number>(0);
    const animationProps = useSpring({
        rightArm: rightArm[rightArmIndex],
    });

    useEffect(() => {
        setInterval(() => handleRightArmToggle(), 800);
    }, []);

    const handleRightArmToggle = () => setRightArmIndex(prev => prev === 0 ? 1 : 0);

    return (
        <animated.path 
            d={animationProps.rightArm}
            fill="#FBB205"
            />
    );
}

const Tail = () => {
    const [tailIndex, setTailIndex] = useState<number>(0);
    const animationProps = useSpring({
        tail: tail[tailIndex],
    });

    useEffect(() => {
        if (tailIndex === 0) {
            const delayOffset = Math.random() * 4000;
            tail.forEach((t,i) => {
                let delay = delayOffset + 2000 + 200 * i;
                setTimeout(() => handleMoveTailUp(), delay)
            });
        }
        else if (tailIndex === tail.length-1){
            const delayOffset = Math.random() * 1000;
            tail.reverse().forEach((t,i) => {
                let delay = delayOffset + 500 + (300 * i);
                setTimeout(() => handleMoveTailDown(), delay)
            });
        }
    }, [tailIndex]);

    const handleMoveTailUp = () => setTailIndex(prev => prev === tail.length-1 ? prev : prev+1 );
    const handleMoveTailDown = () => setTailIndex(prev => prev === 0 ? 0 : prev-1 );

    return(
        <animated.path 
            d={animationProps.tail} 
            fill="#F9BF05"
            />
    );
}

const Eyes = () => {
    const [eyeIndex, setEyeIndex] = useState<number>(0);

    const animationProps = useSpring({
        leftEye: leftEye[eyeIndex],
        rightEye: rightEye[eyeIndex],
    });

    useEffect(() => {
        // true if eyes are open
        if (eyeIndex === 0) {
            setTimeout(() => handleCloseEyes(), 3000)
        }
        else {
            setTimeout(() => handleOpenEyes(), 300);
        }
    }, [eyeIndex]);

    const handleOpenEyes = () => setEyeIndex(0);
    const handleCloseEyes = () => setEyeIndex(1);

    return (
        <g className='eyes'>
            <path d="M496.021 63.933C497.49 67.9101 500.275 69.6277 505.114 69.6277C506.044 69.6277 507.078 69.6145 508.013 69.5071C511.113 65.7086 510.226 63.0453 509.338 61.2697C507.701 57.9958 503.364 56.079 499.572 58.6064C496.909 60.3819 496.909 62.1575 496.021 63.933Z" fill="black"/>
            <path d="M504.899 47.0654C501.348 47.0654 495.134 53.1203 495.134 59.4942C495.134 61.029 495.556 62.6716 496.021 63.933C496.909 62.1575 496.909 60.3819 499.572 58.6064C503.364 56.079 507.701 57.9958 509.338 61.2697C510.226 63.0453 511.113 65.7086 508.013 69.5071C508.489 69.4525 508.94 69.3735 509.338 69.2596C514.138 67.8866 516.44 64.3036 516.44 59.4942C516.44 50.6165 511.113 47.0654 504.899 47.0654Z" fill="white"/>
            <path d="M531.532 63.933C533.001 67.9101 535.786 69.6277 540.625 69.6277C541.555 69.6277 542.589 69.6145 543.524 69.5071C546.624 65.7086 545.736 63.0453 544.849 61.2697C543.212 57.9958 538.874 56.079 535.083 58.6064C532.42 60.3819 532.42 62.1575 531.532 63.933Z" fill="black"/>
            <path d="M540.41 47.0654C535.971 47.0654 530.644 53.1203 530.644 59.4942C530.644 61.029 531.066 62.6716 531.532 63.933C532.42 62.1575 532.42 60.3819 535.083 58.6064C538.874 56.079 543.212 57.9958 544.849 61.2697C545.736 63.0453 546.624 65.7086 543.524 69.5071C544 69.4525 544.45 69.3735 544.849 69.2596C549.124 67.4375 551.549 63.9579 551.951 59.4942C552.621 52.0502 545.736 47.0654 540.41 47.0654Z" fill="white"/>
            <animated.path 
                fillRule="evenodd" 
                    clipRule="evenodd" 
                    d={animationProps.rightEye}
                    fill="#FBC00D"
                    />
            <animated.path 
                fillRule="evenodd" 
                clipRule="evenodd" 
                d={animationProps.leftEye}
                fill="#FBC00D"
                />
        </g>
    );
}